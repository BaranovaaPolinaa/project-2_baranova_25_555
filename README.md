# project-2_baranova_25_555

## Примитивная база данных

Примитивная база данных.

## Запуск проекта на Python

### Требования

Перед началом убедись, что у тебя установлено:

* **Python** версии **3.11** или выше
  Проверить версию:

  ```bash
  python3 --version
  ```

* **Poetry** – менеджер зависимостей и виртуальных окружений
  Установка:

  ```bash
  curl -sSL https://install.python-poetry.org | python3 -
  ```

  Проверка:

  ```bash
  poetry --version
  ```

* **pre-commit** – инструмент для автоматических проверок при коммитах
  Установка:

  ```bash
  pip install pre-commit
  ```
---

## Быстрый старт через Makefile

В проекте есть `Makefile`, который автоматизирует основные шаги.
Доступные команды:

### 1. Установка зависимостей

```bash
make install
```

Устанавливает все зависимости через Poetry и подготавливает окружение.
### 2. Активация виртуального окружения

После установки зависимостей можно активировать окружение двумя способами:
Через Poetry (рекомендовано):

```bash
  poetry env activate
```

Ручной способ (если нужно активировать .venv напрямую):
```bash
  source .venv/bin/activate
```

После активации можно запускать проект и устанавливать пакеты внутри окружения.

### 3. Запуск проекта

```bash
  make project
```

Запускает основной скрипт проекта (`poetry run project`).

### 4. Сборка пакета

```bash
  make build
```

Собирает дистрибутив пакета (`.whl`) в папку `dist/`.

### 5. Публикация (тестовый режим)

```bash
  make publish
```

Проверяет, как пройдёт публикация в PyPI, без фактической загрузки (`--dry-run`).

### 6. Установка собранного пакета

```bash
  make package-install
```

Устанавливает локально последний собранный wheel-файл из `dist/`.

### 6. Проверка кодовой базы

```bash
  make lint
```

---

## Полезно знать

* Для ручного запуска без Makefile можно использовать:

  ```bash
  poetry install
  poetry run project
  ```
* Если используешь .venv напрямую, не забудь активировать его через:
  ```bash
  source .venv/bin/activate
  ```
---
## Управление таблицами

Модуль предоставляет базовую функциональность для работы с таблицами в небольшой обучающей БД.
Метаданные хранятся в файле db_meta.json.

### Доступные команды:

| Команда | Описание |
| --- | --- |
| `create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> ...` | Создать таблицу |
| `drop_table <имя_таблицы>` | Удалить таблицу |
| `list_tables` | Показать все таблицы |
| `help` | Справка |
| `exit` | Выход |

### Демонстрация процесса

#### [![asciicast](https://asciinema.org/a/eUr6WsQKRzN7sdyDSQxejXa1g.svg)](https://asciinema.org/a/eUr6WsQKRzN7sdyDSQxejXa1g)

## CRUD-операции

Теперь, когда таблицы можно создавать и удалять, можно работать с данными внутри таблиц: добавлять, читать, обновлять и удалять записи.

### Доступные команды

| Команда | Описание |
| --- | --- |
| `insert into <имя_таблицы> values (<значение1>, <значение2>, ...)` | Создать запись в таблице. |
| `select from <имя_таблицы>` | Показать все записи таблицы. |
| `select from <имя_таблицы> where <столбец>=<значение>` | Показать записи, удовлетворяющие условию. |
| `update <имя_таблицы> set <столбец>=<новое_значение> where <столбец>=<значение>` | Обновить запись(и) по условию. |
| `delete from <имя_таблицы> where <столбец>=<значение>` | Удалить запись(и) по условию. |
| `info <имя_таблицы>` | Показать информацию о таблице: список столбцов и количество записей. |

### Пример работы

#### [![asciicast](https://asciinema.org/a/MUTKl7hRSqxf07BS1xcTCJyYo.svg)](https://asciinema.org/a/MUTKl7hRSqxf07BS1xcTCJyYo)

### Новые возможности
	1.	Обработка ошибок:
        Все функции обернуты декоратором handle_db_errors. Он перехватывает    KeyError, ValueError, FileNotFoundError и выводит понятные сообщения пользователю.
	2.	Подтверждение опасных действий:
        Функции drop_table и delete обернуты декоратором confirm_action.

### Пример работы

#### [![asciicast](https://asciinema.org/a/6j4SjE79JQiTA0CqInXQKAO1e.svg)](https://asciinema.org/a/6j4SjE79JQiTA0CqInXQKAO1e)
